var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,a=(e,t,r)=>new Promise(((o,s)=>{var a=e=>{try{n(r.next(e))}catch(t){s(t)}},i=e=>{try{n(r.throw(e))}catch(t){s(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);n((r=r.apply(e,t)).next())}));import{B as i,b as n}from "./index.ae2ab368.js";import{f as d,g as l}from "./useForm.bb6fa296.js";import{b as c}from "./account.data.dcbf1a67.js";import{g as m}from "./system.78153014.js";import{d as p,e as u}from "./user.5f6ebdde.js";import{B as f,r as j,u as b,j as g,$ as y,D as v,a0 as h,a4 as x,w,a3 as O}from "./vendor.4c4242b5.js";import"./index.446d454d.js";import"./useWindowSizeFn.d8bc0d08.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.d48332d7.js";/* empty css              */import"./uuid.5e4d726a.js";import"./download.b1d83379.js";import"./index.4400f2f0.js";var F=f({name:"AccountModal",components:{BasicModal:i,BasicForm:d},emits:["success","register"],setup(e, {emit:i}){const d=j(!0),f=j(""),[y,{setFieldsValue:v,updateSchema:h,resetFields:x,validate:w,clearValidate:O}]=l({labelWidth:100,schemas:c,showActionButtonGroup:!1,actionColOptions:{span:23}}),[F,{setModalProps:B,closeModal:M}]=n((e=>a(this,null,(function*(){x(),B({confirmLoading:!1}),d.value=!!(null==e?void 0:e.isUpdate),b(d)&&(f.value=e.record.userId,v(((e, a)=>{for(var i in a||(a={}))r.call(a,i)&&s(e,i,a[i]);if(t)for(var i of t(a))o.call(a,i)&&s(e,i,a[i]);return e})({},e.record))),O();const a=yield m();h([{field:"pwd",show:!b(d)},{field:"deptId",componentProps:{treeData:a}}])}))));return{registerModal:F,registerForm:y,getTitle:g((()=>b(d)?"编辑账号":"新增账号")),handleSubmit:function(){return a(this,null,(function*(){try{const e=yield w();B({confirmLoading:!0}),b(d)?(e.userId=f.value,yield p(e)):yield u(e),M(),i("success")}finally{B({confirmLoading:!1})}}))}}}});F.render=function(e, t, r, o, s, a){const i=y("BasicForm"),n=y("BasicModal");return v(),h(n,O(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:x((()=>[w(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export{F as default};
