var e=(e,o,t)=>new Promise(((n,i)=>{var s=e=>{try{r(t.next(e))}catch(o){i(o)}},a=e=>{try{r(t.throw(e))}catch(o){i(o)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);r((t=t.apply(e,o)).next())}));import{_ as o,u as t}from "./useTable.1153f980.js";import{_ as n}from "./useForm.bb6fa296.js";import{f as i,r as s}from "./user.5f6ebdde.js";import{P as a}from "./index.b86de47c.js";import r from "./DeptTree.2b84ee51.js";import{u as d}from "./index.ae2ab368.js";import l from "./AccountModal.b37e5dfe.js";import{h as c}from "./system.78153014.js";import{c as u,s as m}from "./account.data.dcbf1a67.js";import{k as p,ao as f}from "./index.446d454d.js";import{B as h,O as b,$ as j,D as w,a0 as x,a4 as g,w as S,ab as y,ac as P}from "./vendor.4c4242b5.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./uuid.5e4d726a.js";import"./useWindowSizeFn.d8bc0d08.js";/* empty css              */import"./useSortable.8f01f022.js";/* empty css              *//* empty css              *//* empty css              */import"./index.d48332d7.js";import"./download.b1d83379.js";import"./index.4400f2f0.js";/* empty css              *//* empty css              */import"./useContentViewHeight.cec819c9.js";import"./Tree.vue_vue&type=style&index=0&lang.f9b58fa2.js";var v=h({name:"AccountManagement",components:{BasicTable:o,PageWrapper:a,DeptTree:r,AccountModal:l,TableAction:n},setup(){const o=p(),[n,{openModal:a}]=d(),r=b({}),{hasPermission:l}=f(),[h,{reload:j}]=t({title:"账号列表",api:c,rowKey:"userId",columns:u,formConfig:{labelWidth:120,schemas:m,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn: e=>e,actionColumn:{width:120,title:"操作",dataIndex:"action",slots:{customRender:"action"},ifShow:l("user:detail:view")&&l("log:view")||l("user:update")||l("user:delete")||l("user:reset")}});return{registerTable:h,registerModal:n,handleCreate:function(){a(!0,{isUpdate:!1})},handleEdit:function(e){a(!0,{record:e,isUpdate:!0})},handleDelete:function(o){return e(this,null,(function*(){yield i(o.userId),r.deptId="",j()}))},handleResetPassword:function(o){return e(this,null,(function*(){yield s(o.username),r.deptId="",j()}))},handleSuccess:function(){r.deptId="",j()},handleSelect:function(e=""){r.deptId=e,j()},handleView:function(e){o("/system/accountDetail/"+e.username)},searchInfo:r,hasPermission:l}}});const C=P(" 新增账号 ");v.render=function(e, o, t, n, i, s){const a=j("DeptTree"),r=j("a-button"),d=j("TableAction"),l=j("BasicTable"),c=j("AccountModal"),u=j("PageWrapper");return w(),x(u,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:g((()=>[S(a,{class:"w-1/4 xl:w-1/5",onSelect:e.handleSelect},null,8,["onSelect"]),S(l,{onRegister:e.registerTable,class:"w-3/4 xl:w-4/5",searchInfo:e.searchInfo},{toolbar:g((()=>[e.hasPermission("user:add")?(w(),x(r,{key:0,type:"primary",onClick:e.handleCreate},{default:g((()=>[C])),_:1},8,["onClick"])):y("",!0)])),action:g((({record:o})=>[S(d,{actions:[{icon:"clarity:info-standard-line",tooltip:"查看用户详情",onClick:e.handleView.bind(null,o),ifShow:e.hasPermission("user:detail:view")&&e.hasPermission("log:view")},{icon:"clarity:note-edit-line",tooltip:"编辑用户资料",onClick:e.handleEdit.bind(null,o),ifShow:e.hasPermission("user:update")},{icon:"ant-design:delete-outlined",color:"error",tooltip:"删除此账号",popConfirm:{title:"是否确认删除",confirm:e.handleDelete.bind(null,o)},ifShow:e.hasPermission("user:delete")},{icon:"ant-design:redo-outlined",color:"warning",tooltip:"重置密码",popConfirm:{title:"是否确认重置密码",confirm:e.handleResetPassword.bind(null,o)},ifShow:e.hasPermission("user:reset")}]},null,8,["actions"])])),_:1},8,["onRegister","searchInfo"]),S(c,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])),_:1})};export{v as default};
