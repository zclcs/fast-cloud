import{B as e,bn as a,b9 as t,r as s,$ as o,D as r,a0 as n,a4 as i,w as d,J as c,F as l,ar as m,K as u,a9 as p,ab as f,ac as b}from "./vendor.4c4242b5.js";import{P as j}from "./index.b86de47c.js";import{k as x,a3 as y,h as g}from "./index.446d454d.js";/* empty css              */import{_ as h,u as v}from "./useTable.1153f980.js";import"./useForm.bb6fa296.js";import{c as T}from "./system.78153014.js";import{u as k}from "./user.5f6ebdde.js";import{u as P}from "./index.ae2ab368.js";import w from "./AccountPasswordModal.55032aa9.js";/* empty css              *//* empty css              */import"./useWindowSizeFn.d8bc0d08.js";import"./useContentViewHeight.cec819c9.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./uuid.5e4d726a.js";/* empty css              */import"./useSortable.8f01f022.js";/* empty css              *//* empty css              *//* empty css              */import"./index.d48332d7.js";import"./download.b1d83379.js";import"./index.4400f2f0.js";import"./account.data.dcbf1a67.js";const S=[{title:"操作用户",dataIndex:"username",ifShow:!1},{title:"操作内容",dataIndex:"operation"},{title:"耗时",dataIndex:"time",customRender:({record:e})=>e.time+"毫秒"},{title:"操作方法",dataIndex:"method"},{title:"方法参数",dataIndex:"params"},{title:"操作者ip",dataIndex:"ip"},{title:"创建时间",dataIndex:"createTime"},{title:"操作地点",dataIndex:"location"}],I=[{field:"createTime",label:"创建时间",component:"RangePicker",colProps:{span:8}},{field:"operation",label:"操作内容",component:"Input",colProps:{span:6}},{field:"location",label:"操作地点",component:"Input",colProps:{span:6}}],K=e({name:"AccountDetail",components:{PageWrapper:j,ATabs:a,ATabPane:a.TabPane,BasicTable:h,AccountPasswordModal:w},setup(){var e;const a=t(),o=x(),[r,{openModal:n}]=P(),{notification:i}=g(),d=s(null==(e=a.params)?void 0:e.username),c=s("detail"),[l]=v({title:"用户"+d.value+"操作日志",api:T,rowKey:"id",columns:S,formConfig:{labelWidth:120,schemas:I,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,beforeFetch(e){e.username=d.value},handleSearchInfoFn(e){if(e.createTime){const a=e.createTime;e.createTime=void 0,e.createTimeFrom=a[0],e.createTimeTo=a[1]}return e}}),{setTitle:m}=y();return m("详情：用户"+d.value),{registerTable:l,registerModal:r,goBack:function(){o("/system/user")},handleUpdateUserStatus:function(){return e=this,a=null,t=function*(){yield k(d.value),i.success({message:"禁用账号成功",duration:3})},new Promise(((s, o)=>{var r= e=>{try{i(t.next(e))}catch(a){o(a)}},n= e=>{try{i(t.throw(e))}catch(a){o(a)}},i= e=>e.done?s(e.value):Promise.resolve(e.value).then(r,n);i((t=t.apply(e,a)).next())}));var e,a,t},handleUpdatePassword:function(){n(!0,d.value)},handleSuccess:function(e){i.success({message:"密码修改成功",description:"请告知"+e+"用户",duration:3})},username:d,currentKey:c}}}),B=b(" 禁用账号 "),F=b(" 修改密码 "),U={class:"pt-4 m-4 desc-wrap"};K.render=function(e, a, t, s, b, j){const x=o("a-button"),y=o("a-tab-pane"),g=o("a-tabs"),h=o("BasicTable"),v=o("AccountPasswordModal"),T=o("PageWrapper");return r(),n(T,{title:"用户"+e.username+"的资料",content:"这是用户资料详情页面。本页面仅用于演示相同路由在tab中打开多个页面并且显示不同的数据",contentBackground:"",onBack:e.goBack},{extra:i((()=>[d(x,{type:"primary",danger:"",onClick:e.handleUpdateUserStatus},{default:i((()=>[B])),_:1},8,["onClick"]),d(x,{type:"primary",onClick:e.handleUpdatePassword},{default:i((()=>[F])),_:1},8,["onClick"])])),footer:i((()=>[d(g,{"default-active-key":"detail",activeKey:e.currentKey,"onUpdate:activeKey":a[0]||(a[0]= a=>e.currentKey=a)},{default:i((()=>[d(y,{key:"detail",tab:"用户资料"}),d(y,{key:"logs",tab:"操作日志"})])),_:1},8,["activeKey"])])),default:i((()=>[c("div",U,["detail"==e.currentKey?(r(),l(p,{key:0},m(10,(a=>c("div",{key:a},"这是用户"+u(e.username)+"资料Tab",1))),64)):f("",!0),"logs"==e.currentKey?(r(),n(h,{key:1,onRegister:e.registerTable},null,8,["onRegister"])):f("",!0)]),d(v,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])),_:1},8,["title","onBack"])};export{K as default};
